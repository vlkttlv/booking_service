{% extends "base.html" %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', path='style/main.css') }}">
<link rel="stylesheet" href="{{ url_for('static', path='style/bookings.css') }}">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    const searchForOperation = () => {
        const searchInputValue = document.getElementById("operation_search").value;
        const dateFromSelectValue = document.getElementById("date_from").value;
        const dateToSelectValue = document.getElementById("date_to").value;
        window.location.href = `/pages/hotels/${searchInputValue}?date_from=${dateFromSelectValue}&date_to=${dateToSelectValue}`;

        window.location.href = `v1/pages/hotels/${searchInputValue}?date_from=${dateFromSelectValue}&date_to=${dateFromSelectValue}&service=–ü–∞—Ä–∫–æ–≤–∫–∞&min_check=0&max_check=100000`
    }

    const exploreHotelRooms = (hotel_id) => {
        const dateFromSelectValue = document.getElementById("date_from").value;
        const dateToSelectValue = document.getElementById("date_to").value;
        window.location.href = `/pages/hotels/${hotel_id}/rooms?date_from=${dateFromSelectValue}&date_to=${dateToSelectValue}`;
    }
</script>

{% endblock %}

{% block content %}
<!-- <div class="search-container">
    <form id="hotel-search">
      <input type="text" id="search" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –∏–ª–∏ –æ—Ç–µ–ª—è">
      
      <div class="date-range">
        <input type="date" id="check-in" required>
        <input type="date" id="check-out" required>
      </div>
      
      <div class="price-range">
        <input type="number" id="min-price" placeholder="–ú–∏–Ω. —Ü–µ–Ω–∞">
        <input type="number" id="max-price" placeholder="–ú–∞–∫—Å. —Ü–µ–Ω–∞">
      </div>
      
      <div class="services">
        <label><input type="checkbox" name="service" value="wifi"> Wi-Fi</label>
        <label><input type="checkbox" name="service" value="parking"> –ü–∞—Ä–∫–æ–≤–∫–∞</label>
        <label><input type="checkbox" name="service" value="breakfast"> –ó–∞–≤—Ç—Ä–∞–∫</label>
        <label><input type="checkbox" name="service" value="pool"> –ë–∞—Å—Å–µ–π–Ω</label>
        <label><input type="checkbox" name="service" value="gym"> –¢—Ä–µ–Ω–∞–∂—ë—Ä–Ω—ã–π –∑–∞–ª</label>
        <label><input type="checkbox" name="service" value="restaurant"> –ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä –≤ –Ω–æ–º–µ—Ä–µ</label>
      </div>
      
      <button type="submit" class="search-button">–ù–∞–π—Ç–∏ –æ—Ç–µ–ª–∏</button>
    </form>
  </div> -->
<div>
    {% if hotels %}
    <div class="hotel-list"> 
            {% for hotel in hotels %}
            <div class="hotel-card">
                <div class="hotel-images">
                    <div id="carouselExample" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner">
                          <div class="carousel-item active">
                            <img src="{{ url_for('static', path='images/hotels/' + hotel.id|string + '_1.webp') }}" alt="image_1" class="d-block w-100" width="200" height="200">
                          </div>
                          <div class="carousel-item">
                            <img src="{{ url_for('static', path='images/hotels/' + hotel.id|string + '_2.webp') }}" alt="image_2" class="d-block w-100" width="200" height="200">
                          </div>
                          <div class="carousel-item">
                            <img src="{{ url_for('static', path='images/hotels/' + hotel.id|string + '_3.webp') }}" alt="image_3" class="d-block w-100" width="200" height="200">
                          </div>
                        </div>
                        <a class="carousel-control-prev" href="#carouselExample" role="button" data-slide="prev">
                          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                          <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExample" role="button" data-slide="next">
                          <span class="carousel-control-next-icon" aria-hidden="true"></span>
                          <span class="sr-only">Next</span>
                        </a>
                      </div>
                </div>
                <div class="hotel-info">
                    <h2 class="hotel-name">{{ hotel.name }}</h2>
                    <div>üìç {{ hotel.location }}</div>
                    <div>{{ " ¬∑ ".join(hotel.services) }}</div>
                    <div>–û—Å—Ç–∞–ª–æ—Å—å –Ω–æ–º–µ—Ä–æ–≤: {{ hotel.rooms_left }} –∏–∑ {{hotel.rooms_quantity}}</div>
                    <button onclick="exploreHotelRooms('{{ hotel.id }}')"
                                class="book-button">
                            –í—ã–±—Ä–∞—Ç—å –Ω–æ–º–µ—Ä
                        </button>
                  </div>
            </div>
            {% endfor %}
        </div>
        
    {% else %}
    <p>–£–ø—Å, –æ—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã...</p>
    {% endif %}
</div>
{% endblock %}